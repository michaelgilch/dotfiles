#!/bin/bash

# Launch Qalculate if not already running
if ! pgrep qalculate-gtk > /dev/null; then
    qalculate-gtk &
    sleep 0.5 # Give it time to create the window and move it to the scratchpad
fi

# Get workspace info with monitor geometry
WORKSPACE_INFO=$(i3-msg -t get_workspaces | jq -r '.[] | select(.focused==true) | "\(.output) \(.rect.x) \(.rect.width)"')

read FOCUSED_OUTPUT MONITOR_X MONITOR_WIDTH <<< "$WORKSPACE_INFO"

# Calculate position
WINDOW_X=$((MONITOR_X + MONITOR_WIDTH / 5))

# Show and position
i3-msg '[class="Qalculate-gtk"] scratchpad show, move window to output '$FOCUSED_OUTPUT', move position '$WINDOW_X'px 800px'
